<p-growl [value]="msgs"></p-growl>

<div class="page" style="margin-top:130px">

    <div class="page-identity" style="position:fixed; margin-top:-40px;">
      <div class="page-name">
        <h5> Customer View </h5>
      </div>
      <div class="page-track" style="width:47%">
        <ul>
          <li><a routerLink="/crmCustomersList"> Customers </a></li>
          <li><i class="fa fa-angle-double-right" aria-hidden="true"></i></li>
          <li> Customer View </li>
        </ul>
      </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <mat-card class="customer-left-card" style="position:fixed;width:23%;padding:10px;">
                <div class="row">
                    <div class="col-sm-12 text-center">
                        <img src="../../../../assets/profile.png" alt="" style="width:160px;height:160px;border-radius:50px;">
                    </div>
                </div>
                <div class="row">
                  <div class="col-sm-12">
                      <h5 class="customer-left-card-name"> Customer Name </h5>
                      <h5 class="text-center"> <span class="customer-left-card-data"> Created By : Admin Name </span> </h5>
                      <hr>
                      <h5 class="customer-left-card-title"> E-mail : <span class="customer-left-card-data"> Customerinfo@mail.com </span></h5>
                      <hr>
                      <h5 class="customer-left-card-title"> Phone : <span class="customer-left-card-data"> +91 9876543210  </span></h5>
                      <hr>
                      <h5 class="customer-left-card-title"> Website : <span class="customer-left-card-data"> Customerinfo.com </span></h5>
                      <hr>
                      <h5 class="customer-left-card-title"> Created Date : <span class="customer-left-card-data"> 23/12/2017 </span></h5>
                  </div>
                </div>
            </mat-card>
        </div>
        <div class="col-sm-9">
            <mat-card class="customer-right-card" style="padding:10px;">
                <mat-tab-group class="demo-tab-group tab-mat-card">
                    <mat-tab label="About">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> About </span>
                      </ng-template>
                      <div class="demo-tab-content">
                          Lorem ipsum dolor sit amet,
                      </div>
                    </mat-tab>
                    <mat-tab label="Contact">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Contact </span>
                      </ng-template>
                      <div class="demo-tab-content">
                          <p-dataTable [value]="cars" [globalFilter]="ContactsFilter" sortMode="multiple" [rows]="5" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[5,10,25,50]">
                              <p-header>
                                  <div class="row">
                                      <div class="col-sm-4 text-left">
                                          <button mat-raised-button color="accent" (click)="openDialog()" > Create </button> 
                                      </div>
                                      <div class="col-sm-4 text-center"> <h4> Contacts </h4> </div>
                                      <div class="col-sm-4 text-right"> 
                                          <div class="form-field header-search">
                                              <mat-form-field style="width:100%;height:40px; margin-top:-10px">
                                                  <input matInput #ContactsFilter maxlength="12" placeholder="Search">
                                                  <mat-hint align="start"><strong></strong> </mat-hint>
                                                  <mat-hint align="end"></mat-hint>
                                              </mat-form-field>
                                              <mat-icon>search</mat-icon>
                                          </div>
                                      </div>
                                  </div> 
                              </p-header>
                              <p-column header="S.No" [style]="{'width':'60px','text-align':'center'}" >
                                  <ng-template let-col let-i="rowIndex" pTemplate="body">
                                      <span >{{i+1}}</span>
                                  </ng-template> 
                              </p-column>
                              <p-column field="vin" header="Vin" [sortable]="true" ></p-column>
                              <p-column field="brand" header="Brand" [sortable]="true" ></p-column>
                              <p-column field="year" header="Year" [sortable]="true" ></p-column>
                              <p-column field="color" header="Color" [sortable]="true" >
                                  <ng-template let-col let-car="rowData" pTemplate="body">
                                      <span [style.color]="car[col.field]">{{car[col.field]}}</span>
                                  </ng-template>
                              </p-column>
                              <p-column styleClass="col-button" [style]="{'text-align':'center'}" >
                                  <ng-template pTemplate="header">
                                       Action
                                  </ng-template>
                                  <ng-template let-car="rowData" pTemplate="body">
                                          <div class="button-row tabel-action">
                                              <button mat-mini-fab class="bg-color-info" color="accent" (click)="EditCar(car)" (click)="ContactsEdit.show()" > <mat-icon>border_color</mat-icon> </button>
                                              <button mat-mini-fab class="bg-color-warning" color="accent" (click)="ViewCar(car)" > <mat-icon>visibility</mat-icon> </button>
                                              <button mat-mini-fab class="bg-color-danger" color="accent"  (click)="openModal(DeleteConfirm)" > <mat-icon>delete_forever</mat-icon> </button>
                                          </div>
                                  </ng-template>
                              </p-column>
                          </p-dataTable> 
                      </div>  
                    </mat-tab>
                    <mat-tab label="Activity" >
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Activity </span>
                      </ng-template>
                      <div class="demo-tab-content">
                          <p-dataTable [value]="cars" [globalFilter]="ActivityFilter" sortMode="multiple" [rows]="5" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[5,10,25,50]">
                              <p-header>
                                  <div class="row">
                                      <div class="col-sm-4 text-left">
                                          <button mat-raised-button color="accent" (click)="ActivityAdd.show()"> Create </button> 
                                      </div>
                                      <div class="col-sm-4 text-center"> <h4> Activities </h4> </div>
                                      <div class="col-sm-4 text-right"> 
                                          <div class="form-field header-search">
                                              <mat-form-field style="width:100%;height:40px; margin-top:-10px">
                                                  <input matInput #ActivityFilter maxlength="12" placeholder="Search">
                                                  <mat-hint align="start"><strong></strong> </mat-hint>
                                                  <mat-hint align="end"></mat-hint>
                                              </mat-form-field>
                                              <mat-icon>search</mat-icon>
                                          </div>
                                      </div>
                                  </div> 
                              </p-header>
                              <p-column header="S.No" [style]="{'width':'60px','text-align':'center'}" >
                                  <ng-template let-col let-i="rowIndex" pTemplate="body">
                                      <span >{{i+1}}</span>
                                  </ng-template> 
                              </p-column>
                              <p-column field="vin" header="Vin" [sortable]="true" ></p-column>
                              <p-column field="brand" header="Brand" [sortable]="true" ></p-column>
                              <p-column field="year" header="Year" [sortable]="true" ></p-column>
                              <p-column field="color" header="Color" [sortable]="true" >
                                  <ng-template let-col let-car="rowData" pTemplate="body">
                                      <span [style.color]="car[col.field]">{{car[col.field]}}</span>
                                  </ng-template>
                              </p-column>
                              <p-column styleClass="col-button" [style]="{'text-align':'center'}" >
                                  <ng-template pTemplate="header">
                                       Action
                                  </ng-template>
                                  <ng-template let-car="rowData" pTemplate="body">
                                          <div class="button-row tabel-action">
                                              <button mat-mini-fab class="bg-color-info" color="accent" (click)="EditCar(car)" (click)="ActivityEdit.show()" > <mat-icon>border_color</mat-icon> </button>
                                              <button mat-mini-fab class="bg-color-warning" color="accent" (click)="ViewCar(car)" > <mat-icon>visibility</mat-icon> </button>
                                              <button mat-mini-fab class="bg-color-danger" color="accent"  (click)="openModal(DeleteConfirm)" > <mat-icon>delete_forever</mat-icon> </button>
                                          </div>
                                  </ng-template>
                              </p-column>
                          </p-dataTable>
                      </div>  
                    </mat-tab>
                    <mat-tab label="Quote">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Quote </span>
                      </ng-template>
                      <div class="demo-tab-content">
                        Lorem ipsum dolor sit amet,
                      </div>  
                    </mat-tab>
                    <mat-tab label="Sales Order">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Sales Order </span>
                      </ng-template>
                      <div class="demo-tab-content">
                        Lorem ipsum dolor sit amet,
                      </div>
                    </mat-tab>
                    <mat-tab label="Invoice">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Invoice </span>
                      </ng-template>
                      <div class="demo-tab-content">
                        Lorem ipsum dolor sit amet,
                      </div>
                    </mat-tab>
                    <mat-tab label="Payment">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Payment </span>
                      </ng-template>
                      <div class="demo-tab-content">
                        Lorem ipsum dolor sit amet,
                      </div>
                    </mat-tab>
                    <mat-tab label="Remainder">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Remainder </span>
                      </ng-template>
                      <div class="demo-tab-content">
                        Lorem ipsum dolor sit amet,
                      </div>
                    </mat-tab>
                    <mat-tab label="Funnel Stage">
                      <ng-template mat-tab-label>
                        <span class="customer-right-tab-heading"> Funnel Stage </span>
                      </ng-template>
                      <div class="demo-tab-content">
                        Lorem ipsum dolor sit amet,
                      </div>
                    </mat-tab>
                </mat-tab-group>
            </mat-card>
        </div>
    </div>

</div>


<!-- Models -->

    <!-- CRM Customers Contacts Add Model -->
    <div class="modal fade" bsModal #ContactsAdd="bs-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form class="md-float-material" [formGroup]="ContactsAddForm" (submit)="ContactsAddFormSubmit()" >
                    <div class="modal-header">
                        <h4 class="modal-title pull-left">Add Contact </h4>
                        <button type="button" class="close pull-right" aria-label="Close" (click)="ContactsAdd.hide()">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group row">
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="name"  placeholder=" Name ">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="mobile" placeholder="Mobile">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="phone" placeholder="Phone">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="email" placeholder="E-mail">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="jobTitle" placeholder="Job Title">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="contactRole" placeholder="Contact Role">
                                            <mat-option *ngFor="let ContactRole of ContactRoles" [value]="ContactRole">{{ContactRole}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <textarea matInput type="text" formControlName="notes" placeholder=" Notes "></textarea>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" mat-raised-button class="bg-color-warning" color="accent" (click)="ContactsAdd.hide()"> Close </button>
                        <button type="submit" mat-raised-button color="accent" (click)="ContactsAdd.hide()"> Submit </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- CRM Customers Contacts Edit Model -->
    <div class="modal fade" bsModal #ContactsEdit="bs-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form class="md-float-material" [formGroup]="ContactsEditForm" (submit)="ContactsEditFormSubmit()" >
                    <div class="modal-header">
                        <h4 class="modal-title pull-left">Edit Contact </h4>
                        <button type="button" class="close pull-right" aria-label="Close" (click)="ContactsEdit.hide()">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group row">
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="name"  placeholder=" Name ">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="mobile" placeholder="Mobile">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="phone" placeholder="Phone">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="email" placeholder="E-mail">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="jobTitle" placeholder="Job Title">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="contactRole" placeholder="Contact Role">
                                            <mat-option *ngFor="let ContactRole of ContactRoles" [value]="ContactRole">{{ContactRole}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <textarea matInput type="text" formControlName="notes" placeholder=" Notes "></textarea>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" mat-raised-button class="bg-color-warning" color="accent" (click)="ContactsEdit.hide()"> Close </button>
                        <button type="submit"mat-raised-button color="accent" (click)="ContactsEdit.hide()"> Submit </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- CRM Customers Activity Add Model -->
    <div class="modal fade" bsModal #ActivityAdd="bs-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form class="md-float-material" [formGroup]="ActivityAddForm" (submit)="ActivityAddFormSubmit()" >
                    <div class="modal-header">
                        <h4 class="modal-title pull-left">Add Activity </h4>
                        <button type="button" class="close pull-right" aria-label="Close" (click)="ActivityAdd.hide()">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group row">
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="activityDate"  placeholder=" Activity Date " bsDatepicker>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="contactPerson" placeholder="Contact Person">
                                            <mat-option *ngFor="let ContactPerson of ContactPersons" [value]="ContactPerson">{{ContactPerson}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="subject" placeholder="Subject" >
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="activityType" placeholder=" Activity Type ">
                                            <mat-option *ngFor="let ActivityType of ActivityTypes" [value]="ActivityType">{{ActivityType}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="status" placeholder=" Status ">
                                            <mat-option *ngFor="let Status of Statuses" [value]="Status">{{Status}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="priority" placeholder=" Priority ">
                                            <mat-option *ngFor="let Priority of Priorities" [value]="Priority">{{Priority}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <textarea matInput type="text" formControlName="notes" placeholder=" Notes "></textarea>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" mat-raised-button class="bg-color-warning" color="accent" (click)="ActivityAdd.hide()"> Close </button>
                        <button type="submit" mat-raised-button color="accent" (click)="ActivityAdd.hide()"> Submit </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- CRM Customers Activity Edit Model -->
    <div class="modal fade" bsModal #ActivityEdit="bs-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form class="md-float-material" [formGroup]="ActivityEditForm" (submit)="ActivityEditFormSubmit()" >
                    <div class="modal-header">
                        <h4 class="modal-title pull-left">Edit Activity </h4>
                        <button type="button" class="close pull-right" aria-label="Close" (click)="ActivityEdit.hide()">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group row">
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="activityDate"  placeholder=" Activity Date " bsDatepicker>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="contactPerson" placeholder="Contact Person">
                                            <mat-option *ngFor="let ContactPerson of ContactPersons" [value]="ContactPerson">{{ContactPerson}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <input matInput type="text" formControlName="subject" placeholder="Subject" >
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="activityType" placeholder=" Activity Type ">
                                            <mat-option *ngFor="let ActivityType of ActivityTypes" [value]="ActivityType">{{ActivityType}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="status" placeholder=" Status ">
                                            <mat-option *ngFor="let Status of Statuses" [value]="Status">{{Status}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom: 20px">
                                <div class="example-container">
                                    <mat-form-field>
                                        <mat-select formControlName="priority" placeholder=" Priority ">
                                            <mat-option *ngFor="let Priority of Priorities" [value]="Priority">{{Priority}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm-6" style="margin-bottom:20px;">
                                <div class="example-container">
                                    <mat-form-field>
                                        <textarea matInput type="text" formControlName="notes" placeholder=" Notes "></textarea>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" mat-raised-button class="bg-color-warning" color="accent" (click)="ActivityEdit.hide()"> Close </button>
                        <button type="submit"mat-raised-button color="accent" (click)="ActivityEdit.hide()"> Submit </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- CRM Customers Delete Confirmation Model -->
    <ng-template #DeleteConfirm>
        <div class="modal-body text-center">
            <p>Are You Sure You Whant To Delete This Data ?</p>
            <button type="button" mat-raised-button class="bg-color-warning" color="accent" (click)="declineDelete()" >No</button>
            <button type="button" mat-raised-button color="accent" class="btn btn-default" (click)="confirmDelete()" >Yes</button>
        </div>
    </ng-template>
